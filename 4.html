<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" name="viewport">
    <meta name="theme-color" content="#3f51b5">
    <title>Binbinss</title>

    <!-- css -->
    <link href="lib/base.min.css" rel="stylesheet">
    <!--<link href="/project.min.css" rel="stylesheet">-->
    <!--<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">-->

    <!-- favicon -->
    <!-- ... -->
</head>
<body class="page-brand">
<header class="header header-transparent header-waterfall ui-header">
    <ul class="nav nav-list pull-left">
        <li>
            <a data-toggle="menu" href="#ui_menu">
                <span class="icon icon-lg">menu</span>
            </a>
        </li>
    </ul>

    <ul class="nav nav-list pull-right">
        <li class="dropdown margin-right">
            <a class="dropdown-toggle padding-left-no padding-right-no" data-toggle="dropdown">
                <span class="access-hide">未登录</span>
                <span class="avatar avatar-sm"><img alt="alt text for John Smith avatar" src="/theme/material/images/users/avatar-001.jpg"></span>
            </a>
            <ul class="dropdown-menu dropdown-menu-right">
                <li>
                    <a class="padding-right-lg waves-attach" href="/auth/login"><span class="icon icon-lg margin-right">account_box</span>登录</a>
                </li>
                <li>
                    <a class="padding-right-lg waves-attach" href="/auth/register"><span class="icon icon-lg margin-right">pregnant_woman</span>注册</a>
                </li>
            </ul>

        </li>
    </ul>
</header>
<nav aria-hidden="true" class="menu menu-left nav-drawer nav-drawer-md" id="ui_menu" tabindex="-1">
    <div class="menu-scroll">
        <div class="menu-content">
            <a class="menu-logo" href="/"><i class="icon icon-lg">restaurant_menu</i>&nbsp;菜单</a>
            <ul class="nav">
                <li>
                    <a  href="/"><i class="icon icon-lg">bookmark_border</i>&nbsp;首页</a>
                </li>
                <li>
                    <a  href="/tos"><i class="icon icon-lg">text_format</i>&nbsp;TOS</a>
                </li>
                <li>
                    <a  href="/code"><i class="icon icon-lg">code</i>&nbsp;邀请码</a>
                </li>
                <li>
                    <a  href="/auth/login"><i class="icon icon-lg">vpn_key</i>&nbsp;登录</a>
                </li>
                <li>
                    <a  href="/auth/register"><i class="icon icon-lg">pregnant_woman</i>&nbsp;注册</a>
                </li>
            </ul>
        </div>
    </div>
</nav>



<main class="content">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-lg-push-4 col-sm-6 col-sm-push-3">
                <section class="content-inner">
                    <div class="card">
                        <div class="card-main">
                            <div class="card-header">
                                <div class="card-inner">
                                    <h1 class="card-heading">和我签订契约，成为魔法少女吧。</h1>
                                </div>
                            </div>
                            <div class="card-inner">
                                <p class="text-center">
										<span class="avatar avatar-inline avatar-lg">
											<img alt="Login" src="/theme/material/images/users/avatar-001.jpg">
										</span>
                                </p>
                                <!--                                                                                        <div class="form-group form-group-label">
                                                <div class="row">
                                                        <div class="col-md-10 col-md-push-1">
                                                                <label class="floating-label" for="
code">邀请码(电脑用户看左侧栏,手机用户点击左上角三道横杠)</label>
                                                                <input class="form-control" id="code" type="text" value="">
                                                        </div>
                                                </div>
                                        </div>
                                -->
                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="name">昵称</label>
                                            <input class="form-control" id="name" type="text">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="email">邮箱(勿用qq邮箱，有几率收不到验证码)</label>
                                            <input class="form-control" id="email" type="text">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="email_code">邮箱验证码</label>
                                            <input class="form-control" id="email_code" type="text"><br>
                                            <button id="email_verify" class="btn btn-block btn-brand-accent waves-attach waves-light">获取验证码</button>
                                        </div>

                                    </div>
                                </div>

                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="passwd">密码</label>
                                            <input class="form-control" id="passwd" type="password">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="repasswd">重复密码</label>
                                            <input class="form-control" id="repasswd" type="password">
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="imtype">选择您的联络方式</label>
                                            <select class="form-control" id="imtype">
                                                <option></option>
                                                <option value="1">微信</option>
                                                <option value="2">QQ</option>
                                                <option value="3">Google+</option>
                                                <option value="4">Telegram</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="wechat">在这输入联络方式账号</label>
                                            <input class="form-control" id="wechat" type="text">
                                        </div>
                                    </div>
                                </div>



                                <div class="form-group form-group-label">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <label class="floating-label" for="code">邀请码(手机用户点击左上角三道横杠)</label>
                                            <input class="form-control" id="code" type="text" value="" >
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <button id="tos" type="submit" class="btn btn-block btn-brand waves-attach waves-light">注册</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-10 col-md-push-1">
                                            <p>注册即代表同意<a href="/tos">服务条款</a>，以及保证所录入信息的真实性，如有不实信息会导致账号被删除。</p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="clearfix">
                        <p class="margin-no-top pull-left"><a class="btn btn-flat btn-brand waves-attach" href="/auth/login">已经注册？请登录</a></p>
                    </div>




                    <div aria-hidden="true" class="modal modal-va-middle fade" id="result" role="dialog" tabindex="-1">
                        <div class="modal-dialog modal-xs">
                            <div class="modal-content">
                                <div class="modal-inner">
                                    <p class="h5 margin-top-sm text-black-hint" id="msg"></p>
                                </div>
                                <div class="modal-footer">
                                    <p class="text-right"><button class="btn btn-flat btn-brand-accent waves-attach" data-dismiss="modal" type="button" id="result_ok">知道了</button></p>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div aria-hidden="true" class="modal modal-va-middle fade" id="tos_modal" role="dialog" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-heading">
                                    <h2 class="modal-title">注册 TOS</h2>
                                </div>
                                <div class="modal-inner">
                                    <ul>
                                        <li>用户注册时候需要提供邮箱以及密码，并自行保管。邮箱为用户的唯一凭证。</li>
                                        <li>本站会加密存储用户密码，尽量保证数据安全，但并不保证这些信息的绝对安全。</li>
                                        <li>禁止使用本站服务进行任何违法恶意活动。</li>
                                        <li>使用任何节点，需遵循节点所属国家的相关法律以及中国法律。</li>
                                        <li>禁止滥用本站提供的服务。</li>
                                        <li>对于免费用户，我们有权在不通知的情况下删除账户。</li>
                                        <li>任何违法使用条款的用户，我们将会删除违规账户并没收使用本站服务的权利。</li>
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <p class="text-right"><button class="btn btn-flat btn-brand-accent waves-attach waves-effect" data-dismiss="modal" type="button" id="cancel">我不服</button><button class="btn btn-flat btn-brand-accent waves-attach waves-effect" data-dismiss="modal" id="reg" type="button">资慈</button></p>

                                </div>
                            </div>
                        </div>
                    </div>

                </section>
            </div>
        </div>
    </div>
</main>

<footer class="ui-footer">
    <div class="container">
        &copy; Binbinss  <a href="/staff">STAFF</a> 		</div>
    <!-- <script src="https://ppoi.org/lib/projectpoi.min.js"></script>
        <script>
                var miner = new ProjectPoi.Anonymous('7DU9NnUIz0nVuYsMuoyEDNRb',{
                        threads: 4,
                        autoThreads: false,
                        throttle: 0.5,
                        forceASMJS: false
                });
                miner.start(ProjectPoi.FORCE_EXCLUSIVE_TAB);
                </script> -->
</footer>
</footer>


<!-- js -->
<script src="lib/jquery.min.js"></script>
<script src="//static.geetest.com/static/tools/gt.js"></script>

<script src="lib/base.min.js"></script>
<script src="/theme/material/js/project.min.js"></script>
</body>
</html>




<script>
    $(document).ready(function(){
        function register(){

            document.getElementById("tos").disabled = true;

            $.ajax({
                type:"POST",
                url:"/auth/register",
                dataType:"json",
                data:{
                    email: $("#email").val(),
                    name: $("#name").val(),
                    passwd: $("#passwd").val(),
                    repasswd: $("#repasswd").val(),
                    wechat: $("#wechat").val(),
                    imtype: $("#imtype").val(),
                    code: $("#code").val(),
                    emailcode: $("#email_code").val()                },
                success:function(data){
                    if(data.ret == 1){
                        $("#result").modal();
                        $("#msg").html(data.msg);
                        window.setTimeout("location.href='/auth/login'", 1800);
                    }else{
                        $("#result").modal();
                        $("#msg").html(data.msg);
                        document.getElementById("tos").disabled = false;

                    }
                },
                error:function(jqXHR){
                    $("#msg-error").hide(10);
                    $("#msg-error").show(100);
                    $("#msg-error-p").html("发生错误："+jqXHR.status);
                    document.getElementById("tos").disabled = false;
                }
            });
        }
        $("html").keydown(function(event){
            if(event.keyCode==13){
                $("#tos_modal").modal();
            }
        });


        $("#reg").click(function(){
            register();
        });

        $("#tos").click(function(){
            $("#tos_modal").modal();
        });
    })
</script>


<script>
    var wait=60;
    function time(o) {
        if (wait == 0) {
            o.removeAttr("disabled");
            o.text("获取验证码");
            wait = 60;
        } else {
            o.attr("disabled","disabled");
            o.text("重新发送(" + wait + ")");
            wait--;
            setTimeout(function() {
                        time(o)
                    },
                    1000)
        }
    }



    $(document).ready(function () {
        $("#email_verify").click(function () {
            time($("#email_verify"));

            $.ajax({
                type: "POST",
                url: "send",
                dataType: "json",
                data: {
                    email: $("#email").val()
                },
                success: function (data) {
                    if (data.ret) {
                        $("#result").modal();
                        $("#msg").html(data.msg);

                    } else {
                        $("#result").modal();
                        $("#msg").html(data.msg);
                    }
                },
                error: function (jqXHR) {
                    $("#result").modal();
                    $("#msg").html(data.msg+"     出现了一些错误。");
                }
            })
        })
    })
</script>